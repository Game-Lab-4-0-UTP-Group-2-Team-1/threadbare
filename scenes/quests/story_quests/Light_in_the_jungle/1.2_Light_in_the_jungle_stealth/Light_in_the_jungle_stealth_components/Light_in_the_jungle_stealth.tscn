[gd_scene load_steps=10 format=4 uid="uid://byekonhp81q6o"]

[ext_resource type="Script" uid="uid://dnp0tjloec2d7" path="res://scenes/game_logic/stealth_game_logic.gd" id="1_a6i4e"]
[ext_resource type="TileSet" uid="uid://07fq3rspk8ia" path="res://scenes/tileset.tres" id="2_imko1"]
[ext_resource type="PackedScene" uid="uid://iu2q66clupc6" path="res://scenes/game_elements/characters/player/player.tscn" id="3_kr1i2"]
[ext_resource type="Texture2D" uid="uid://bhqanyxhpxpm" path="res://assets/first_party/rocks/Rock_Idle.png" id="6_7wbho"]
[ext_resource type="Script" uid="uid://x1mxt6bmei2o" path="res://scenes/ui_elements/cinematic/cinematic.gd" id="11_jbsab"]
[ext_resource type="Resource" uid="uid://cggywn8t6s4le" path="res://scenes/quests/story_quests/template/1_template_stealth/template_stealth_components/template_stealth.dialogue" id="12_ws1g5"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_57l1g"]
size = Vector2(26, 20)

[sub_resource type="GDScript" id="GDScript_7wbho"]
script/source = "extends RigidBody2D

var jugador_cerca = false  # Variable para saber si el jugador está cerca

func _ready():
	sleeping = false  # Permitir que reciba física siempre

func _physics_process(delta):
	if jugador_cerca:
		# Verificamos si el jugador presiona una tecla de movimiento
		var direccion = Vector2.ZERO

		if Input.is_action_pressed(\"ui_right\"):
			direccion.x += 1
		if Input.is_action_pressed(\"ui_left\"):
			direccion.x -= 1
		if Input.is_action_pressed(\"ui_down\"):
			direccion.y += 1
		if Input.is_action_pressed(\"ui_up\"):
			direccion.y -= 1

		# Si se presiona alguna tecla y hay dirección...
		if direccion != Vector2.ZERO:
			# Aplica un pequeño impulso en esa dirección
			apply_central_impulse(direccion.normalized() * 150)
"

[sub_resource type="RectangleShape2D" id="RectangleShape2D_7wbho"]
size = Vector2(43, 39)

[node name="StealthTemplateLevel" type="Node2D"]
y_sort_enabled = true

[node name="StealthGameLogic" type="Node" parent="."]
script = ExtResource("1_a6i4e")
zoom = 1.7

[node name="CanvasModulate" type="CanvasModulate" parent="."]
color = Color(0.433458, 0.381108, 0.437513, 1)

[node name="TileMapLayers" type="Node2D" parent="."]
y_sort_enabled = true

[node name="Grass" type="TileMapLayer" parent="TileMapLayers"]
tile_map_data = PackedByteArray("AAAAAAQAAQABAAEAAAABAAQAAQABAAEAAAACAAUAAQABAAEAAAADAAUAAQABAAEAAAAEAAUAAQABAAEAAAAFAAUAAQABAAEAAAAGAAUAAQABAAEAAAAHAAYAAQABAAEAAAAIAAYAAQABAAEAAAAJAAYAAQABAAEAAAAKAAYAAQABAAEAAAALAAYAAQABAAEAAAAMAAYAAQABAAEAAAANAAYAAQABAAEAAAAOAAYAAQABAAEAAAAPAAYAAQABAAEAAAAQAAYAAQABAAEAAAARAAYAAQABAAEAAAASAAYAAQABAAEAAAATAAYAAQABAAEAAAATAAUAAQABAAEAAAASAAUAAQABAAEAAAARAAUAAQABAAEAAAAQAAQAAQABAAEAAAAPAAQAAQABAAEAAAAOAAQAAQABAAEAAAANAAQAAQABAAEAAAAMAAQAAQABAAEAAAALAAQAAQABAAEAAAAKAAQAAQABAAEAAAAJAAQAAQABAAEAAAAIAAQAAQABAAEAAAAHAAQAAQABAAEAAAAGAAQAAQABAAEAAAAFAAQAAQABAAEAAAAEAAQAAQABAAEAAAADAAQAAQABAAEAAAACAAQAAQABAAEAAAANAAUAAQABAAEAAAAMAAUAAQABAAEAAAALAAUAAQABAAEAAAAKAAUAAQABAAEAAAAJAAUAAQABAAEAAAAGAAYAAQABAAEAAAAFAAYAAQABAAEAAAAEAAYAAQABAAEAAAADAAYAAQABAAEAAAACAAYAAQABAAEAAAABAAYAAQABAAEAAAAHAAUAAQABAAEAAAAIAAUAAQABAAEAAAABAAUAAQABAAEAAAAAAAUAAQABAAEAAAAAAA4AAQABAAEAAAABAA4AAQABAAEAAAACAA4AAQABAAEAAAADAA4AAQABAAEAAAAEAA4AAQABAAEAAAAFAA4AAQABAAEAAAAGAA4AAQABAAEAAAAHAA4AAQABAAEAAAAIAA4AAQABAAEAAAAJAA4AAQABAAEAAAAKAA4AAQABAAEAAAALAA4AAQABAAEAAAAMAA4AAQABAAEAAAANAA4AAQABAAEAAAAOAA4AAQABAAEAAAAPAA4AAQABAAEAAAAQAA4AAQABAAEAAAARAA4AAQABAAEAAAASAA4AAQABAAEAAAASAA0AAQABAAEAAAATAA0AAQABAAEAAAATAAwAAQABAAEAAAATAAsAAQABAAEAAAATAAoAAQABAAEAAAATAAkAAQABAAEAAAATAAgAAQABAAEAAAATAAcAAQABAAEAAAASAAQAAQABAAEAAAARAAQAAQABAAEAAAATAAQAAQABAAEAAAASAAsAAQABAAEAAAASAAwAAQABAAEAAAATAA4AAQABAAEAAAARAA0AAQABAAEAAAARAAwAAQABAAEAAAASAA8AAQABAAEAAAARAA8AAQABAAEAAAAQAA8AAQABAAEAAAAPAA8AAQABAAEAAAAOAA8AAQABAAEAAAANAA8AAQABAAEAAAAMAA8AAQABAAEAAAALAA8AAQABAAEAAAAKAA8AAQABAAEAAAAJAA8AAQABAAEAAAAIAA8AAQABAAEAAAAHAA8AAQABAAEAAAAGAA8AAQABAAEAAAAFAA8AAQABAAEAAAAEAA8AAQABAAEAAAADAA8AAQABAAEAAAACAA8AAQABAAEAAAABAA8AAQABAAEAAAAAAA8AAQABAAEAAAAAAA0AAQABAAEAAAABAA0AAQABAAEAAAACAA0AAQABAAEAAAADAA0AAQABAAEAAAAEAA0AAQABAAEAAAAFAA0AAQABAAEAAAAGAA0AAQABAAEAAAAHAA0AAQABAAEAAAAIAA0AAQABAAEAAAAJAA0AAQABAAEAAAAKAA0AAQABAAEAAAALAA0AAQABAAEAAAAMAA0AAQABAAEAAAANAA0AAQABAAEAAAAOAA0AAQABAAEAAAAPAA0AAQABAAEAAAAQAA0AAQABAAEAAAARAAsAAQABAAEAAAAQAAsAAQABAAEAAAAQAAwAAQABAAEAAAAPAAwAAQABAAEAAAAOAAwAAQABAAEAAAANAAwAAQABAAEAAAAMAAwAAQABAAEAAAALAAwAAQABAAEAAAAKAAwAAQABAAEAAAAJAAwAAQABAAEAAAAIAAwAAQABAAEAAAAHAAwAAQABAAEAAAAGAAwAAQABAAEAAAAFAAwAAQABAAEAAAAEAAwAAQABAAEAAAADAAwAAQABAAEAAAACAAwAAQABAAEAAAABAAwAAQABAAEAAAAAAAwAAQABAAEAAAAAAAsAAQABAAEAAAABAAsAAQABAAEAAAACAAsAAQABAAEAAAADAAsAAQABAAEAAAAEAAsAAQABAAEAAAAFAAsAAQABAAEAAAAGAAsAAQABAAEAAAAHAAsAAQABAAEAAAAIAAsAAQABAAEAAAAJAAsAAQABAAEAAAAKAAsAAQABAAEAAAALAAsAAQABAAEAAAAMAAsAAQABAAEAAAANAAsAAQABAAEAAAAOAAsAAQABAAEAAAAPAAsAAQABAAEAAAAUAAsAAQABAAEAAAAUAAoAAQABAAEAAAASAAoAAQABAAEAAAARAAoAAQABAAEAAAAQAAoAAQABAAEAAAAPAAoAAQABAAEAAAAOAAoAAQABAAEAAAANAAoAAQABAAEAAAAMAAoAAQABAAEAAAALAAoAAQABAAEAAAAKAAoAAQABAAEAAAAJAAoAAQABAAEAAAAIAAoAAQABAAEAAAAHAAoAAQABAAEAAAAGAAoAAQABAAEAAAAFAAoAAQABAAEAAAAEAAoAAQABAAEAAAADAAoAAQABAAEAAAACAAoAAQABAAEAAAABAAoAAQABAAEAAAAAAAoAAQABAAEAAAAAAAkAAQABAAEAAAAAAAYAAQABAAEAAAABAAcAAQABAAEAAAABAAgAAQABAAEAAAAAAAgAAQABAAEAAAAAAAcAAQABAAEAAAACAAcAAQABAAEAAAACAAgAAQABAAEAAAADAAgAAQABAAEAAAAEAAkAAQABAAEAAAAFAAkAAQABAAEAAAAGAAkAAQABAAEAAAAGAAgAAQABAAEAAAAHAAgAAQABAAEAAAAIAAgAAQABAAEAAAAFAAgAAQABAAEAAAAEAAgAAQABAAEAAAADAAcAAQABAAEAAAAEAAcAAQABAAEAAAAFAAcAAQABAAEAAAAGAAcAAQABAAEAAAADAAkAAQABAAEAAAACAAkAAQABAAEAAAABAAkAAQABAAEAAAALAAcAAQABAAEAAAAKAAcAAQABAAEAAAAJAAcAAQABAAEAAAAIAAcAAQABAAEAAAAHAAcAAQABAAEAAAAMAAcAAQABAAEAAAALAAgAAQABAAEAAAAKAAgAAQABAAEAAAAJAAgAAQABAAEAAAAMAAgAAQABAAEAAAANAAgAAQABAAEAAAAMAAkAAQABAAEAAAALAAkAAQABAAEAAAAKAAkAAQABAAEAAAAJAAkAAQABAAEAAAAIAAkAAQABAAEAAAAHAAkAAQABAAEAAAAOAAgAAQABAAEAAAAPAAgAAQABAAEAAAAOAAkAAQABAAEAAAANAAkAAQABAAEAAAAQAAgAAQABAAEAAAARAAgAAQABAAEAAAARAAkAAQABAAEAAAAQAAkAAQABAAEAAAAPAAkAAQABAAEAAAANAAcAAQABAAEAAAAOAAcAAQABAAEAAAAOAAUAAQABAAEAAAAPAAUAAQABAAEAAAAQAAUAAQABAAEAAAAQAAcAAQABAAEAAAAPAAcAAQABAAEAAAAUAAcAAQABAAEAAAAUAAgAAQABAAEAAAAUAAkAAQABAAEAAAASAAkAAQABAAEAAAASAAgAAQABAAEAAAASAAcAAQABAAEAAAARAAcAAQABAAEAAAAUAAQAAQABAAEAAAAUAAUAAQABAAEAAAAUAAYAAQABAAEAAAAPABAAAQABAAEAAAAOABAAAQABAAEAAAANABAAAQABAAEAAAAMABAAAQABAAEAAAALABAAAQABAAEAAAAKABAAAQABAAEAAAAJABAAAQABAAEAAAAIABAAAQABAAEAAAAHABAAAQABAAEAAAAGABAAAQABAAEAAAAFABAAAQABAAEAAAAEABAAAQABAAEAAAADABAAAQABAAEAAAACABAAAQABAAEAAAABABAAAQABAAEAAAAAABAAAQAAAAEAAAAUAA0AAQABAAEAAAAUAAwAAQABAAEAAAAUABEAAQABAAIAAAATABEAAQABAAIAAAASABEAAQABAAIAAAARABEAAQABAAIAAAAQABEAAQABAAIAAAAPABEAAQABAAIAAAAOABEAAQABAAIAAAANABEAAQABAAIAAAAMABEAAQABAAIAAAALABEAAQABAAIAAAAKABEAAQABAAIAAAAJABEAAQABAAIAAAAIABEAAQABAAIAAAAHABEAAQABAAIAAAAGABEAAQABAAIAAAAFABEAAQABAAIAAAAEABEAAQABAAIAAAADABEAAQABAAIAAAACABEAAQABAAIAAAABABEAAQABAAIAAAAAABEAAQAAAAIAAAAUABAAAQABAAEAAAATABAAAQABAAEAAAASABAAAQABAAEAAAARABAAAQABAAEAAAAQABAAAQABAAEAAAAUAA8AAQABAAEAAAATAA8AAQABAAEAAAAUAA4AAQABAAEAAAAXAAMAAQACAAAAAAAWAAMAAQABAAAAAAAVAAMAAQABAAAAAAAUAAMAAQABAAAAAAATAAMAAQABAAAAAAASAAMAAQABAAAAAAARAAMAAQABAAAAAAAQAAMAAQABAAAAAAAPAAMAAQABAAAAAAAOAAMAAQABAAAAAAANAAMAAQABAAAAAAAMAAMAAQABAAAAAAALAAMAAQABAAAAAAAKAAMAAQABAAAAAAAJAAMAAQABAAAAAAAIAAMAAQABAAAAAAAHAAMAAQABAAAAAAAGAAMAAQABAAAAAAAFAAMAAQABAAAAAAAEAAMAAQABAAAAAAADAAMAAQABAAAAAAACAAMAAQABAAAAAAABAAMAAQABAAAAAAAAAAMAAQAAAAAAAAAXABEAAQACAAIAAAAXABAAAQACAAEAAAAXAA8AAQACAAEAAAAXAA4AAQACAAEAAAAXAA0AAQACAAEAAAAXAAwAAQACAAEAAAAXAAsAAQACAAEAAAAXAAoAAQACAAEAAAAXAAkAAQACAAEAAAAXAAgAAQACAAEAAAAXAAcAAQACAAEAAAAXAAYAAQACAAEAAAAXAAUAAQACAAEAAAAXAAQAAQACAAEAAAAWABAAAQABAAEAAAAWAA8AAQABAAEAAAAWAA4AAQABAAEAAAAWAA0AAQABAAEAAAAWAAwAAQABAAEAAAAWAAsAAQABAAEAAAAWAAoAAQABAAEAAAAWAAkAAQABAAEAAAAWAAgAAQABAAEAAAAWAAcAAQABAAEAAAAWAAYAAQABAAEAAAAWAAUAAQABAAEAAAAWAAQAAQABAAEAAAAVABEAAQABAAIAAAAVABAAAQABAAEAAAAVAA8AAQABAAEAAAAVAA4AAQABAAEAAAAVAA0AAQABAAEAAAAVAAwAAQABAAEAAAAVAAsAAQABAAEAAAAVAAoAAQABAAEAAAAVAAkAAQABAAEAAAAVAAgAAQABAAEAAAAVAAcAAQABAAEAAAAVAAYAAQABAAEAAAAVAAUAAQABAAEAAAAVAAQAAQABAAEAAAAWABEAAQABAAIAAAA=")
tile_set = ExtResource("2_imko1")

[node name="Stone" type="TileMapLayer" parent="TileMapLayers"]
position = Vector2(-11, 0)
tile_map_data = PackedByteArray("AAABAAIABAAAAAMAAAACAAIABAABAAMAAAADAAIABAABAAMAAAAEAAIABAABAAMAAAAFAAIABAABAAMAAAAGAAIABAABAAMAAAAHAAIABAABAAMAAAAIAAIABAABAAMAAAAJAAIABAABAAMAAAAKAAIABAABAAMAAAALAAIABAABAAMAAAAMAAIABAABAAMAAAANAAIABAABAAMAAAAOAAIABAABAAMAAAAPAAIABAABAAMAAAAQAAIABAABAAMAAAARAAIABAABAAMAAAASAAIABAABAAMAAAATAAIABAABAAMAAAAUAAIABAABAAMAAAAVAAIABAABAAMAAAAWAAIABAABAAMAAAAXAAIABAACAAMAAAABABMABAADAAMAAAACABMABAADAAMAAAADABMABAADAAMAAAAEABMABAADAAMAAAAFABMABAADAAMAAAAGABMABAADAAMAAAAHABMABAADAAMAAAAIABMABAADAAMAAAAJABMABAADAAMAAAAKABMABAADAAMAAAALABMABAADAAMAAAAMABMABAADAAMAAAANABMABAADAAMAAAAOABMABAADAAMAAAAPABMABAADAAMAAAAQABMABAADAAMAAAARABMABAADAAMAAAASABMABAADAAMAAAATABMABAADAAMAAAAUABMABAADAAMAAAAVABMABAADAAMAAAAWABMABAADAAMAAAAXABMABAADAAMAAAABABIABAABAAQAAAACABIABAABAAQAAAADABIABAABAAQAAAAEABIABAABAAQAAAAFABIABAABAAQAAAAGABIABAABAAQAAAAHABIABAABAAQAAAAIABIABAABAAQAAAAJABIABAABAAQAAAAKABIABAABAAQAAAALABIABAABAAQAAAAMABIABAABAAQAAAANABIABAABAAQAAAAOABIABAABAAQAAAAPABIABAABAAQAAAAQABIABAABAAQAAAARABIABAABAAQAAAASABIABAABAAQAAAATABIABAABAAQAAAAVABIABAABAAQAAAAWABIABAABAAQAAAAYAAEABAABAAAAAAAXAAEABAABAAQAAAAWAAEABAABAAQAAAAVAAEABAABAAQAAAAUAAEABAABAAQAAAATAAEABAABAAQAAAASAAEABAABAAQAAAARAAEABAABAAQAAAAQAAEABAABAAQAAAAPAAEABAABAAQAAAAOAAEABAABAAQAAAANAAEABAABAAQAAAAMAAEABAABAAQAAAALAAEABAABAAQAAAAKAAEABAABAAQAAAAJAAEABAABAAQAAAAIAAEABAABAAQAAAAHAAEABAABAAQAAAAGAAEABAABAAQAAAAFAAEABAABAAQAAAAEAAEABAABAAQAAAADAAEABAABAAQAAAACAAEABAABAAQAAAABAAEABAABAAQAAAAAAAEABAAAAAAAAAAAABMABAADAAMAAAAYABMABAADAAMAAAAUABIABAABAAQAAAAYABIABAADAAIAAAAXABIABAACAAQAAAAAABIABAABAAQAAAAAAAIABAADAAEAAAAAAAMABAADAAEAAAAAAAQABAADAAEAAAAAAAUABAADAAEAAAAAAAYABAADAAEAAAAAAAcABAADAAEAAAAAAAgABAADAAEAAAAAAAkABAADAAEAAAAAAAoABAADAAEAAAAAAAsABAADAAEAAAAAAAwABAADAAEAAAAAAA0ABAADAAEAAAAAAA4ABAADAAEAAAAAAA8ABAADAAEAAAAAABAABAADAAEAAAAAABEABAADAAIAAAAYAAIABAADAAEAAAAYAAMABAADAAEAAAAYAAQABAADAAEAAAAYAAUABAADAAEAAAAYAAYABAADAAEAAAAYAAcABAADAAEAAAAYAAgABAADAAEAAAAYAAkABAADAAEAAAAYAAoABAADAAEAAAAYAAsABAADAAEAAAAYAAwABAADAAEAAAAYAA0ABAADAAEAAAAYAA4ABAADAAEAAAAYAA8ABAADAAEAAAAYABAABAADAAEAAAAYABEABAADAAEAAAAGAAgABAABAAQAAAAHAAgABAABAAQAAAAIAAgABAABAAQAAAAJAAgABAABAAQAAAAKAAgABAABAAQAAAALAAgABAABAAQAAAAMAAgABAABAAQAAAANAAgABAABAAQAAAA=")
tile_set = ExtResource("2_imko1")

[node name="Player" parent="." instance=ExtResource("3_kr1i2")]
position = Vector2(135, 486)
collision_layer = 79
collision_mask = 607

[node name="Camera2D" type="Camera2D" parent="Player"]
process_mode = 3
position = Vector2(-4, -9)
zoom = Vector2(1.7, 1.7)
limit_left = 0
limit_top = 0
position_smoothing_enabled = true
editor_draw_limits = true

[node name="CollisionShape2D2" type="CollisionShape2D" parent="Player"]
position = Vector2(-3, 0)
shape = SubResource("RectangleShape2D_57l1g")

[node name="Checkpoints" type="Node2D" parent="."]
y_sort_enabled = true
position = Vector2(-4, 0)

[node name="ScreenOverlay" type="CanvasLayer" parent="."]

[node name="Cinematic" type="Node2D" parent="."]
position = Vector2(-3, 6)
script = ExtResource("11_jbsab")
dialogue = ExtResource("12_ws1g5")
metadata/_custom_type_script = "uid://x1mxt6bmei2o"

[node name="caja" type="RigidBody2D" parent="."]
position = Vector2(456, 414)
collision_layer = 14
collision_mask = 15
gravity_scale = 0.0
inertia = 1.0
can_sleep = false
freeze = true
script = SubResource("GDScript_7wbho")

[node name="Sprite2D" type="Sprite2D" parent="caja"]
texture = ExtResource("6_7wbho")

[node name="CollisionShape2D" type="CollisionShape2D" parent="caja"]
shape = SubResource("RectangleShape2D_7wbho")
